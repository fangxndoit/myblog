---
title: CDN
date: 2022-06-21 10:44:11
tags:
---

#### 用户使用CDN缓存资源的过程

1. DNS系统解析URL，得到一个CDN专用的DNS服务器，DNS系统把域名解析权限交给DNS服务器
2. DNS服务器将CDN的全局负载均衡设备ip地址返回给用户
3. 用户向CDN全局负载均衡设备发起数据请求
4. CDN全局负载均衡设备根据用户的ip和请求的内容，选择一台区域的负载均衡设备，并告诉用户向这台设备发起请求
5. 区域负载均衡设备选择一台合适的缓存服务器，并将该缓存服务器的ip返回给全局负载均衡设备
6. 全局负载均衡设备把缓存服务器的ip返回给用户
7. 用户向缓存服务器发送请求，服务器响应请求

#### 用户未使用CDN缓存资源的过程

1. DNS解析域名，得到域名对应的ip地址
2. 浏览器向得到的ip地址发送请求
3. 服务器向浏览器返回响应的数据