---
title: reactive 解析
date: 2022-12-06 16:51:27
tags: vue3 reactive
---

### 转

#### 思考实现

如果让我们基于`Proxy`来实现`Vue`的响应式数据的话，因为是响应式的，我们必须知道哪些属性被使用，在它更改时需要重新执行监听函数，我们可以把监听函数跟收集函数统一使用一个函数来执行，而收集的函数里面收集到的`key`可能时动态的，所以每次更改都要清空依赖重新收集一遍依赖，加上`Proxy`的特性所以当收集函数使用`get`获取数据时收集当前使用`key`，当外部`set`修改数据时查看当前`set`时，查看`key`是否被收集，如果被收集了，则`set`之后重新出发收集函数再次收集，而`vue3`中这个收集函数就是`effect`。当然真实使用时肯定不止`get`，`set`这里为了方便理解，我们先按简单的来看，逻辑如下图所示

![](https://bill-lai.github.io/article/6452d43210bfdd32fd3c/image/realize.drawio.svg)

