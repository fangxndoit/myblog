---
title: 进程和线程
date: 2022-06-24 11:40:14
tags:
---

#### 浏览器进程

- **一个浏览器主线程：**主要负责界面显示、用户交互、子进程管理、同时提供存储等功能
- **多个渲染进程：**核心任务是将`HTML`、`CSS`和`JavaScript`转换为用户可以与之交互的网页，排版引擎`Blink`和`JavaScript`引擎`V8`都是运行在该进程中
- **一个GPU进程：**绘制`UI`界面
- **一个网络进程：**主要负责页面的网络资源加载
- **多个插件进程：**主要负责插件的运行

#### 浏览器渲染进程的线程

- **GUI渲染线程：**负责渲染浏览器页面，解析`HTML`、`CSS`，构建`DOM`树、构建`CSSOM`树、构建渲染树和绘制页面；当界面需要**重绘**或**回流**时，该线程会触发
- **JS引擎线程：**负责处理Javascript代码，解析Javascript代码

GUI渲染线程和JS引擎线程是互斥的，当JS引擎执行时GUI线程会被挂起，GUI更新会被保存到一个队列中等到JS引擎空闲时才被执行，如果JS执行时间过长，会造成页面渲染阻塞

- **事件触发线程：**用来控制事件循环，当JS引擎执行JS代码，会将对应的任务添加到事件触发线程中；当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎处理
- **定时器触发线程：**用于处理**setInterval**与**setTimeout**
- **异步http请求线程：**`XMLHttpRequest`连接后会通过浏览器新开一个线程请求，当检测到状态变更时，异步线程就会产生状态变更事件，将回调函数放入事件队列中，等待JS引擎空闲后执行